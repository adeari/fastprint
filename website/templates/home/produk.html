<!-- templates/home/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 0;
        }
        .container {
            margin: 0 auto;
            padding: 20px;
        }
        .hero {
            text-align: center;
            padding: 100px 20px;
            color: white;
        }
        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            font-weight: 700;
        }
        .hero p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }
        .btn-get-started {
            background: white;
            color: #667eea;
            padding: 12px 30px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            display: inline-block;
            transition: transform 0.3s;
        }
        .btn-get-started:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .features {
            background: white;
            border-radius: 20px;
            padding: 60px 40px;
            margin-top: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .feature-card {
            text-align: center;
            padding: 30px 20px;
            border-radius: 10px;
            transition: all 0.3s;
        }
        .feature-card:hover {
            background: #f8f9fa;
            transform: translateY(-5px);
        }
        .feature-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #667eea;
        }
        .instructions {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            margin-top: 40px;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
        }
        footer {
            text-align: center;
            padding: 30px 0;
            color: white;
            margin-top: 40px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        table, th, td {
		    border: 1px solid black;
		  }
    </style>
</head>
<body>
    <div class="container">
        <!-- Hero Section -->
        <section class="hero">
            <h1>{{ title }}</h1>            
        </section>
        <section class="instructions" style="text-align:center;visibility:hidden;margin-top:-100px" id="simpanForm">
            <table width="50%" style="text-align: left;">
            	<tr><td>Nama produk</td><td><input type="text" name="nama_produk" id="nama_produk"></td></tr>
            	<tr><td>Harga</td><td><input type="text" name="harga" id="harga"></td></tr>
            	<tr><td>Kategori</td><td><select name="kategori" id="kategori">{{ kategoriOptions|safe }}</td></tr>
            	<tr><td>Status</td><td><select name="status" id="status">{{ statusOptions|safe }}</td></tr>
            	<tr><td colspan="2" style="text-align: center;" onclick="simpan()"><button id="simpanBtn">Tambah</button></td></tr>
            </table>          
        </section>
        <section class="instructions" id="tambahLayout" style="text-align: center;margin-top:-225px">
        	<button onclick="tambah()">Tambah</button>
        </section>
        <section class="instructions">
        	<a href="{{ href }}">{{ hrefLabel }}</a>
        </section>
        <section class="instructions">
        	<table>
        		<tr>
        			<td>ID</td>
        			<td>Produk</td>
        			<td>Harga</td>
        			<td>Kategori</td>
        			<td width="140">Status</td>
        			<td width="150"></td>
        		</tr>
        		{{ results|safe }}   
        	</table>
                    
        </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>ðŸŽ‰ Congratulations! Your Django project is running successfully.</p>
            <p>Built with Django {{ django_version }} | {% now "F d, Y H:i" %}</p>
        </div>
    </footer>
    
<script>
var editId = -1;
function tambah() {
	window.scrollTo(0, 0);
	editId = -1;
	document.getElementById("simpanForm").style.visibility = "visible";
	document.getElementById("simpanBtn").innerHTML = "Tambah produk";
	document.getElementById("tambahLayout").style.marginTop = '';
}

function edit(id, nama_produk, harga, kategori, status) {
	window.scrollTo(0, 0);
	editId = id;
	document.getElementById("simpanForm").style.visibility = "visible";
	document.getElementById("simpanBtn").innerHTML = "Edit produk";
	document.getElementById("tambahLayout").style.marginTop = '';
	
	document.getElementById("nama_produk").value = nama_produk;
	document.getElementById("harga").value = harga;
	document.getElementById("kategori").value = kategori;
	document.getElementById("status").value = status;
}

function isNumeric(value) {
    return /^-?\d+$/.test(value);
}

function simpan() {
	var nama_produk = document.getElementById("nama_produk").value
	if (nama_produk.length < 1) {
		alert('Nama produk belum di isi');
		return
	}
	
	var harga = document.getElementById("harga").value
	if (harga.length < 1) {
		alert('Harga produk belum di isi');
		return
	}
	if (!isNumeric(harga)) {
		alert('Harga harus berupa angka');
		return
	}

	const url = 'simpan'; // The target URL
	const data = {
		nama_produk: nama_produk,
		harga: harga,
		kategori_id: document.getElementById("kategori").value,
		status_id: document.getElementById("status").value,
		editId: editId
	};

	fetch(url, {
	    method: 'POST', // Specify the method
	    headers: {
	        'Content-Type': 'application/json', // Indicate the content type
	    },
	    body: JSON.stringify(data), // The data payload, stringified
	})
	.then(response => response.json()) // Handle the response
	.then(data => {
		window.location.reload();
	})
	.catch((error) => {
	    console.error('Error:', error);
	});
}
function hapus(id, nama) {
	var userConfirmed = confirm('Apakah produk ' + nama + ' akan di hapus');
	if (!userConfirmed) {
		return;		
	}
	
	const url = 'hapus'; // The target URL
	const data = {
		id: id,
	};

	fetch(url, {
	    method: 'POST', // Specify the method
	    headers: {
	        'Content-Type': 'application/json', // Indicate the content type
	    },
	    body: JSON.stringify(data), // The data payload, stringified
	})
	.then(response => response.json()) // Handle the response
	.then(data => {
		window.location.reload();
	})
	.catch((error) => {
	    console.error('Error:', error);
	});
}
</script>
</body>
</html>
